# 用户管理系统使用说明

## 功能概述

本系统新增了完整的用户管理功能，支持对用户的全面管理，包括：

- 用户列表查看
- 用户信息编辑（realName、邮箱、phone、groups、user_permissions）
- 用户创建
- 用户删除
- 用户状态切换（激活/禁用）
- 用户密码重置
- 用户组和权限管理

## 后端API说明

### 新增的API端点：

1. **用户管理API**
   - `GET /users/` - 获取用户列表（支持分页、搜索、排序）
   - `POST /users/` - 创建新用户
   - `GET /users/{id}/` - 获取用户详情
   - `PUT/PATCH /users/{id}/` - 更新用户信息
   - `DELETE /users/{id}/` - 删除用户
   - `POST /users/{id}/reset-password` - 重置用户密码
   - `POST /users/{id}/toggle-status` - 切换用户状态

2. **用户组和权限API**
   - `GET /groups/` - 获取所有用户组
   - `GET /permissions/` - 获取所有权限

### 数据结构：

```json
{
  "id": 1,
  "username": "test_user",
  "email": "test@example.com",
  "realName": "测试用户",
  "phone": "13800138000",
  "desc": "用户描述",
  "is_active": true,
  "is_staff": false,
  "is_superuser": false,
  "date_joined": "2024-01-01T00:00:00Z",
  "last_login": "2024-01-01T00:00:00Z",
  "groups": [
    {
      "id": 1,
      "name": "普通用户"
    }
  ],
  "user_permissions": [
    {
      "id": 1,
      "name": "Can add user",
      "codename": "add_user",
      "content_type": 1
    }
  ]
}
```

## 前端界面说明

### 访问路径：
- 用户管理页面：`/system/user`

### 功能说明：

1. **用户列表**
   - 显示用户的基本信息：ID、用户名、真实姓名、邮箱、手机号、用户组、状态、管理员权限、创建时间
   - 支持分页展示
   - 支持按字段排序

2. **新建用户**
   - 点击"新建用户"按钮打开创建对话框
   - 必填字段：用户名、密码、真实姓名、邮箱
   - 可选字段：手机号、描述、用户组、用户权限、状态、管理员权限、超级管理员

3. **编辑用户**
   - 点击"编辑"按钮打开编辑对话框
   - 可修改除用户名外的所有信息
   - 支持修改用户组和权限

4. **密码重置**
   - 点击"重置密码"按钮
   - 管理员可为用户设置新密码
   - 密码长度最少8位

5. **状态管理**
   - 点击"启用/禁用"按钮切换用户状态
   - 不能禁用自己的账户

6. **删除用户**
   - 点击"删除"按钮删除用户
   - 不能删除自己的账户
   - 删除前会弹出确认对话框

## 文件结构

### 后端文件：
- `Backend/App/models.py` - 用户模型（已存在，扩展了字段）
- `Backend/App/serializers.py` - 新增用户管理相关序列化器
- `Backend/App/views.py` - 新增用户管理ViewSet
- `Backend/App/urls.py` - 新增用户管理API路由
- `Backend/App/filters.py` - 用户过滤器（已存在）
- `Backend/App/pagination.py` - 分页配置（已存在）

### 前端文件：
- `Frontend/apps/web-ele/src/views/system/user/index.vue` - 用户管理主页面
- `Frontend/apps/web-ele/src/api/system/user.ts` - 用户管理API调用
- `Frontend/apps/web-ele/src/router/routes/modules/system.ts` - 系统管理路由（已存在）

## 使用步骤

1. **启动后端服务**
   ```bash
   cd Backend
   python manage.py runserver
   ```

2. **启动前端服务**
   ```bash
   cd Frontend/apps/web-ele
   npm run dev
   ```

3. **访问用户管理**
   - 登录系统后，在左侧菜单找到"系统管理" -> "用户管理"
   - 进入用户管理页面开始使用

## 权限要求

- 需要管理员权限才能访问用户管理功能
- 不同操作可能需要不同的权限级别
- 超级管理员拥有所有权限

## 注意事项

1. 删除用户是不可逆操作，请谨慎使用
2. 重置密码后请及时通知用户新密码
3. 修改用户权限后，用户需要重新登录才能生效
4. 系统会记录用户的创建时间和最后登录时间

## 扩展功能

系统支持进一步扩展：
- 批量导入用户
- 用户操作日志
- 更复杂的权限控制
- 用户头像上传
- 密码策略设置 